#include <stdio.h>
#include <stdlib.h>

struct node {
    int key, height;
    struct node *left, *right;
};

int height(struct node *n) {
    return n ? n->height : 0;
}

int max(int a, int b) {
    return (a>b)?a:b;
}

struct node* newNode(int key) {
    struct node* n = malloc(sizeof(struct node));
    n->key = key;
    n->left = n->right = NULL;
    n->height = 1;
    return n;
}

struct node* rightRotate(struct node* y) {
    struct node* x = y->left;
    y->left = x->right;
    x->right = y;
    y->height = max(height(y->left),height(y->right))+1;
    x->height = max(height(x->left),height(x->right))+1;
    return x;
}

struct node* leftRotate(struct node* x) {
    struct node* y = x->right;
    x->right = y->left;
    y->left = x;
    x->height = max(height(x->left),height(x->right))+1;
    y->height = max(height(y->left),height(y->right))+1;
    return y;
}

int getBalance(struct node* n) {
    return n ? height(n->left)-height(n->right) : 0;
}

struct node* insert(struct node* node, int key) {
    if(!node) return newNode(key);

    if(key < node->key)
        node->left = insert(node->left,key);
    else if(key > node->key)
        node->right = insert(node->right,key);
    else
        return node;

    node->height = 1 + max(height(node->left),height(node->right));
    int balance = getBalance(node);

    if(balance>1 && key<node->left->key)
        return rightRotate(node);
    if(balance<-1 && key>node->right->key)
        return leftRotate(node);

    return node;
}

void inorder(struct node* root) {
    if(root) {
        inorder(root->left);
        printf("%d ",root->key);
        inorder(root->right);
    }
}

int main() {
    struct node* root = NULL;
    root = insert(root,10);
    root = insert(root,20);
    root = insert(root,30);
    inorder(root);
    return 0;
}


SAMPLE OUTPUT :
10 20 30 
